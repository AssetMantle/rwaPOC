@import controllers.actions.LoginState
@import models.master.NFTProperty

@(collection: master.Collection, nft: master.NFT, nftProperties: Seq[NFTProperty], liked: Option[Boolean])(implicit requestHeader: RequestHeader, messagesProvider: MessagesProvider, loginState: Option[LoginState])

<div class="item item-center nftPreviewContainer">
    <div class="d-flex justify-content-between">
@*        @if(collection.getWebsite.isDefined) {*@
@*            <ul class="d-flex gap-3 rightOptions">*@
@*                <li><a href="@collection.getWebsite.get" target="_blank">*@
@*                    <i class="bi bi-globe2 iconDefault iconMedium icon"></i>*@
@*                </a></li>*@
@*            </ul>*@
@*        }*@
    </div>
    <div class="mt-2 nftImagePreview">
        <a href="@nft.getS3Url" target="_blank">
            <div id="nftImage_@nft.id" class="position-relative">
                @if(nft.isImageType) {
                    <img src="@nft.getS3Url">
                }
                @if(nft.isAudioType) {
                    @collection.getCoverFileURL.fold{
                        <img src="@routes.Assets.versioned("images/defaultCollectionCover.png")"/>
                    }{uri =>
                        <img src="@uri"/>
                    }
                    <div class="mb-2 audioNftContainer">
                        <audio controls class="audioPlayer" onloadeddata="setDuration(this)" onended="resetAudioPlayer(this)">
                            <source src="@nft.getS3Url">
                        </audio>

                        <div class="controls">
                            <div class="playButtonContainer withTimeline">
                                <div class="playButton" onclick="playToggle(this)">
                                    <i class="bi bi-play"></i>
                                </div>
                                <div class="timelineContainer">
                                    <div class="timeline" onclick="skipAudio(this)">
                                        <div class="progress"></div>
                                    </div>
                                    <div class="time">
                                        <div class="current">0:00</div>
                                        <div class="divider">/</div>
                                        <div class="length"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="volumeContainer">
                                <div class="volumeButton" onclick="muteVolume(this)">
                                    <i class="bi bi-volume-up"></i>
                                </div>

                                <div class="volumeSlider" onclick="setVolume(this)">
                                    <div class="volumePercentage"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </a>
    </div>
    <div class="nftPropertyContainer">
        <div class="title">
            <ul class="d-flex flex-row justify-content-between">
                <li>@Messages(constants.View.PROPERTIES)</li>
                <li><i class="bi bi-chevron-up iconDefault dropdownIcon" id="showHidePropertyButton" onclick="openPropertyList()"></i></li>
            </ul>
        </div>
        <div class="propertyListContainer">
            <div class="d-flex flex-row flex-wrap gap-3 propertyList">
            @nftProperties.filter(_.value != "").map { property =>
                <div class="singleProperty">
                    <div class="propertyName">@property.name</div>
                    <div class="mt-2 propertyValue">
                    @if(property.meta){
                        @defining(property.value) { propertyValue =>
                            @propertyValue
                        }
                    } else {
                        *****
                    }
                    </div>
                </div>
            }
            </div>
        </div>
    </div>
</div>
<script src="@utilities.PublicResource.getVersionedRoute("javascripts/nfts/view.js")" type="text/javascript"></script>
<script>
        setSharableLink("@collection.getCoverFileURL");
</script>