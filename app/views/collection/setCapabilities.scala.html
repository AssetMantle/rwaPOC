@import controllers.actions.LoginState
@import models.masterTransaction.CollectionDraft
@import views.collection.companion.SetCapabilities
@import views.html.base.form._
@import views.html.base.modal.multiStepNavigator

@(setCapabilitiesForm: Form[SetCapabilities.Data] = SetCapabilities.form, collectionDraft: CollectionDraft)(implicit requestHeader: RequestHeader, messagesProvider: MessagesProvider, loginState: LoginState)

    @commonForm(constants.Form.SET_COLLECTION_CAPABILITIES, setCapabilitiesForm, showBackButton = true, submitDisable = false) {
        @multiStepNavigator(Seq(Messages(constants.View.COLLECTION_STEPPER_BASIC_INFORMATION), Messages(constants.View.COLLECTION_STEPPER_IMAGE_UPLOAD), Messages(constants.View.COLLECTION_STEPPER_CAPABILITIES), Messages(constants.View.COLLECTION_STEPPER_PROPERTIES)), defaultSelected = 2)
        @commonInputText(setCapabilitiesForm, constants.FormField.COLLECTION_ID, Symbol("containerDivClass") -> "hidden", Symbol("value") -> collectionDraft.id, Symbol("readonly") -> "readonly")
        <div class="capabilityInfoContainer">
            <div class="capabilityAdvancedDetail">
                <div class="singleCapability">
                    <div class="d-flex justify-content-between align-items-center capabilityHeader">
                        <div class="d-flex gap-2 align-items-center optionTitle">
                            <i class="bi bi-puzzle iconDefault" style="transform: rotate(-35deg)"></i>
                            <span>@Messages(constants.View.FRACTIONALIZED)</span>
                            <div class="customTooltip">
                                <span class="tooltipText" style="z-index: 999;">@Messages(constants.View.FRACTIONALIZED_TOOLTIP)</span>
                                <i class="bi bi-info-circle iconDefault iconSmall"></i>
                            </div>
                        </div>
                        <div class="options">
                        @if(collectionDraft.isFractionalized) {
                            @commonToggleButton(setCapabilitiesForm, constants.FormField.COLLECTION_FRACTIONALIZED_ENABLE, Symbol("checked") -> "checked")
                        } else {
                            @commonToggleButton(setCapabilitiesForm, constants.FormField.COLLECTION_FRACTIONALIZED_ENABLE)
                        }
                        </div>
                    </div>
                    <div class="capabilityBody" style="display: none;">
                        <div class="propertyAdvancedDetail">
                            <div class="d-flex gap-2 align-content-center mt-2">
                                <div class="bodyHeading">@Messages(constants.View.PROPERTY_ADVANCED_OPTIONS)</div>
                                <i class="bi bi-chevron-down iconDefault iconSmall dropdownIcon" onclick="openPropertyAdvancedOption(this)"></i>
                            </div>
                            <div class="advancedDetailOption">
                                <div class="d-flex justify-content-between align-items-center singleOption">
                                    <div class="d-flex gap-2 optionTitle">
                                        <i class="bi bi-pencil iconDefault iconSmall me-1" style="transform: rotate(-90deg)"></i>
                                        <span>@Messages(constants.View.ADVANCED_PROPERTY_MUTABILITY)</span>
                                    </div>
                                    <div class="options">
                                    @if(collectionDraft.isFractionalized && collectionDraft.getSupply.get.mutable) {
                                        @commonToggleButton(setCapabilitiesForm, constants.FormField.COLLECTION_FRACTIONALIZED_MUTABLE, Symbol("checked") -> "checked")
                                    } else {
                                        @commonToggleButton(setCapabilitiesForm, constants.FormField.COLLECTION_FRACTIONALIZED_MUTABLE)
                                    }
                                    </div>
                                </div>
                                <div class="d-flex justify-content-between align-items-center singleOption">
                                    <div class="d-flex gap-2 optionTitle">
                                        <i class="bi bi-eye iconDefault iconSmall me-1"></i>
                                        <span>@Messages(constants.View.ADVANCED_PROPERTY_HIDE)</span>
                                    </div>
                                    <div class="options">
                                    @if(collectionDraft.isFractionalized && !collectionDraft.getSupply.get.meta) {
                                        @commonToggleButton(setCapabilitiesForm, constants.FormField.COLLECTION_FRACTIONALIZED_HIDDEN, Symbol("checked") -> "checked")
                                    } else {
                                        @commonToggleButton(setCapabilitiesForm, constants.FormField.COLLECTION_FRACTIONALIZED_HIDDEN)
                                    }
                                    </div>
                                </div>
                                <div class="d-flex justify-content-between align-items-center singleOption requirementOption">
                                    <div class="d-flex gap-2 optionTitle">
                                        <i class="bi bi-asterisk iconDefault iconSmall me-1"></i>
                                        <span>@Messages(constants.View.ADVANCED_PROPERTY_REQUIREMENT)</span>
                                    </div>
                                    <div class="options">
                                    @if(collectionDraft.isFractionalized && collectionDraft.getSupply.get.defaultValue != "") {
                                        @commonToggleButton(setCapabilitiesForm, constants.FormField.COLLECTION_PROPERTY_SET_DEFAULT_VALUE, Symbol("checked") -> "checked")
                                    } else {
                                        @commonToggleButton(setCapabilitiesForm, constants.FormField.COLLECTION_PROPERTY_SET_DEFAULT_VALUE)
                                    }
                                    </div>
                                </div>
                                <div class="mb-3 optionInputField" style="display: none;">
                                @if(collectionDraft.isFractionalized && collectionDraft.getSupply.get.defaultValue != "") {
                                    @commonInputInt(setCapabilitiesForm, constants.FormField.COLLECTION_FRACTIONALIZED_DEFAULT, Symbol("required") -> false, Symbol("class") -> "fixedValueField", Symbol("value") -> collectionDraft.getSupply.get.defaultValue)
                                } else {
                                    @commonInputInt(setCapabilitiesForm, constants.FormField.COLLECTION_FRACTIONALIZED_DEFAULT, Symbol("required") -> false, Symbol("class") -> "fixedValueField")
                                }
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="innerSeparator"></div>
                </div>


                <div class="singleCapability">
                    <div class="d-flex justify-content-between align-items-center capabilityHeader">
                        <div class="d-flex gap-2 align-items-center optionTitle">
                            <i class="bi bi-lock iconDefault"></i>
                            <span>@Messages(constants.View.LOCK_PROPERTY)</span>
                            <div class="customTooltip">
                                <span class="tooltipText" style="z-index: 999;">@Messages(constants.View.LOCK_PROPERTY_TOOL_TIP)</span>
                                <i class="bi bi-info-circle iconDefault iconSmall"></i>
                            </div>
                        </div>
                        <div class="options">
                        @if(collectionDraft.isLockable) {
                            @commonToggleButton(setCapabilitiesForm, constants.FormField.COLLECTION_LOCKABLE_ENABLE, Symbol("checked") -> "checked")
                        } else {
                            @commonToggleButton(setCapabilitiesForm, constants.FormField.COLLECTION_LOCKABLE_ENABLE)
                        }
                        </div>
                    </div>
                    <div class="capabilityBody" style="display: none;">
                        <div class="propertyAdvancedDetail">
                            <div class="d-flex gap-2 align-content-center mt-2">
                                <div class="bodyHeading">@Messages(constants.View.PROPERTY_ADVANCED_OPTIONS)</div>
                                <i class="bi bi-chevron-down iconDefault iconSmall dropdownIcon" onclick="openPropertyAdvancedOption(this)"></i>
                            </div>
                            <div class="advancedDetailOption">
                                <div class="d-flex justify-content-between align-items-center singleOption">
                                    <div class="d-flex gap-2 optionTitle">
                                        <i class="bi bi-pencil iconDefault iconSmall me-1" style="transform: rotate(-90deg)"></i>
                                        <span>@Messages(constants.View.ADVANCED_PROPERTY_MUTABILITY)</span>
                                    </div>
                                    <div class="options">
                                    @if(collectionDraft.isLockable && collectionDraft.getLockable.get.mutable) {
                                        @commonToggleButton(setCapabilitiesForm, constants.FormField.COLLECTION_LOCKABLE_MUTABLE, Symbol("checked") -> "checked")
                                    } else {
                                        @commonToggleButton(setCapabilitiesForm, constants.FormField.COLLECTION_LOCKABLE_MUTABLE)
                                    }
                                    </div>
                                </div>
                                <div class="d-flex justify-content-between align-items-center singleOption">
                                    <div class="d-flex gap-2 optionTitle">
                                        <i class="bi bi-eye iconDefault iconSmall me-1"></i>
                                        <span>@Messages(constants.View.ADVANCED_PROPERTY_HIDE)</span>
                                    </div>
                                    <div class="options">
                                    @if(collectionDraft.getLockable.isDefined && !collectionDraft.getLockable.get.meta) {
                                        @commonToggleButton(setCapabilitiesForm, constants.FormField.COLLECTION_LOCKABLE_HIDDEN, Symbol("checked") -> "checked")
                                    } else {
                                        @commonToggleButton(setCapabilitiesForm, constants.FormField.COLLECTION_LOCKABLE_HIDDEN)
                                    }
                                    </div>
                                </div>
                                <div class="d-flex justify-content-between align-items-center singleOption requirementOption">
                                    <div class="d-flex gap-2 optionTitle">
                                        <i class="bi bi-asterisk iconDefault iconSmall me-1"></i>
                                        <span>@Messages(constants.View.ADVANCED_PROPERTY_REQUIREMENT)</span>
                                    </div>
                                    <div class="options">
                                    @if(collectionDraft.isLockable && collectionDraft.getLockable.get.defaultValue != "") {
                                        @commonToggleButton(setCapabilitiesForm, constants.FormField.COLLECTION_PROPERTY_SET_DEFAULT_VALUE, Symbol("checked") -> "checked")
                                    } else {
                                        @commonToggleButton(setCapabilitiesForm, constants.FormField.COLLECTION_PROPERTY_SET_DEFAULT_VALUE)
                                    }
                                    </div>
                                </div>
                                <div class="mb-3 optionInputField" style="display: none;">
                                @if(collectionDraft.isLockable && collectionDraft.getLockable.get.defaultValue != "") {
                                    @commonInputInt(setCapabilitiesForm, constants.FormField.COLLECTION_LOCKABLE_DEFAULT, Symbol("required") -> false, Symbol("class") -> "fixedValueField", Symbol("value") -> collectionDraft.getLockable.get.defaultValue)
                                } else {
                                    @commonInputInt(setCapabilitiesForm, constants.FormField.COLLECTION_LOCKABLE_DEFAULT, Symbol("required") -> false, Symbol("class") -> "fixedValueField")
                                }
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="innerSeparator"></div>
                </div>

                <div class="singleCapability">
                    <div class="d-flex justify-content-between align-items-center capabilityHeader">
                        <div class="d-flex gap-2 align-items-center optionTitle">
                            <i class="bi bi-trash iconDefault"></i>
                            <span>@Messages(constants.View.BURN_PROPERTY)</span>
                            <div class="customTooltip">
                                <span class="tooltipText" style="z-index: 999;">@Messages(constants.View.BURN_PROPERTY_TOOL_TIP)</span>
                                <i class="bi bi-info-circle iconDefault iconSmall"></i>
                            </div>
                        </div>
                        <div class="options">
                        @if(collectionDraft.customBurnEnabled) {
                            @commonToggleButton(setCapabilitiesForm, constants.FormField.COLLECTION_CUSTOM_BURNABLE_ENABLE, Symbol("checked") -> "checked")
                        } else {
                            @commonToggleButton(setCapabilitiesForm, constants.FormField.COLLECTION_CUSTOM_BURNABLE_ENABLE)
                        }
                        </div>
                    </div>
                    <div class="capabilityBody" style="display: none;">
                        <div class="propertyAdvancedDetail">
                            <div class="d-flex gap-2 align-content-center mt-2">
                                <div class="bodyHeading">@Messages(constants.View.PROPERTY_ADVANCED_OPTIONS)</div>
                                <i class="bi bi-chevron-down iconDefault iconSmall dropdownIcon" onclick="openPropertyAdvancedOption(this)"></i>
                            </div>
                            <div class="advancedDetailOption">
                                <div class="d-flex justify-content-between align-items-center singleOption">
                                    <div class="d-flex gap-2 optionTitle">
                                        <i class="bi bi-pencil iconDefault iconSmall me-1" style="transform: rotate(-90deg)"></i>
                                        <span>@Messages(constants.View.ADVANCED_PROPERTY_MUTABILITY)</span>
                                    </div>
                                    <div class="options">
                                    @if(collectionDraft.customBurnEnabled && collectionDraft.getBurnHeight.get.mutable) {
                                        @commonToggleButton(setCapabilitiesForm, constants.FormField.COLLECTION_CUSTOM_BURNABLE_MUTABLE, Symbol("checked") -> "checked")
                                    } else {
                                        @commonToggleButton(setCapabilitiesForm, constants.FormField.COLLECTION_CUSTOM_BURNABLE_MUTABLE)
                                    }
                                    </div>
                                </div>
                                <div class="d-flex justify-content-between align-items-center singleOption">
                                    <div class="d-flex gap-2 optionTitle">
                                        <i class="bi bi-eye iconDefault iconSmall me-1"></i>
                                        <span>@Messages(constants.View.ADVANCED_PROPERTY_HIDE)</span>
                                    </div>
                                    <div class="options">
                                    @if(collectionDraft.customBurnEnabled && !collectionDraft.getBurnHeight.get.meta) {
                                        @commonToggleButton(setCapabilitiesForm, constants.FormField.COLLECTION_CUSTOM_BURNABLE_HIDDEN, Symbol("checked") -> "checked")
                                    } else {
                                        @commonToggleButton(setCapabilitiesForm, constants.FormField.COLLECTION_CUSTOM_BURNABLE_HIDDEN)
                                    }
                                    </div>
                                </div>
                                <div class="d-flex justify-content-between align-items-center singleOption requirementOption">
                                    <div class="d-flex gap-2 optionTitle">
                                        <i class="bi bi-asterisk iconDefault iconSmall me-1"></i>
                                        <span>@Messages(constants.View.ADVANCED_PROPERTY_REQUIREMENT)</span>
                                    </div>
                                    <div class="options">
                                    @if(collectionDraft.customBurnEnabled && collectionDraft.getBurnHeight.get.defaultValue != "") {
                                        @commonToggleButton(setCapabilitiesForm, constants.FormField.COLLECTION_PROPERTY_SET_DEFAULT_VALUE, Symbol("checked") -> "checked")
                                    } else {
                                        @commonToggleButton(setCapabilitiesForm, constants.FormField.COLLECTION_PROPERTY_SET_DEFAULT_VALUE)
                                    }
                                    </div>
                                </div>
                                <div class="mb-3 optionInputField" style="display: none;">
                                @if(collectionDraft.customBurnEnabled && collectionDraft.getBurnHeight.get.defaultValue != "") {
                                    @commonInputInt(setCapabilitiesForm, constants.FormField.COLLECTION_CUSTOM_BURNABLE_DEFAULT, Symbol("required") -> false, Symbol("class") -> "fixedValueField", Symbol("value") -> collectionDraft.getBurnHeight.get.defaultValue)
                                } else {
                                    @commonInputInt(setCapabilitiesForm, constants.FormField.COLLECTION_CUSTOM_BURNABLE_DEFAULT, Symbol("required") -> false, Symbol("class") -> "fixedValueField")
                                }
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="innerSeparator"></div>
                </div>

                <div class="singleCapability">
                    <div class="d-flex justify-content-between align-items-center capabilityHeader">
                        <div class="d-flex gap-2 align-items-center optionTitle">
                            <i class="bi bi-trash iconDefault"></i>
                            <span>@Messages(constants.View.CUSTOM_BOND_AMOUNT) (umntl)</span>
                            <div class="customTooltip">
                                <span class="tooltipText" style="z-index: 999;">@Messages(constants.View.CUSTOM_BOND_AMOUNT_TOOL_TIP)</span>
                                <i class="bi bi-info-circle iconDefault iconSmall"></i>
                            </div>
                        </div>
                        <div class="options">
                        @if(collectionDraft.customBondAmountEnabled) {
                            @commonToggleButton(setCapabilitiesForm, constants.FormField.COLLECTION_CUSTOM_BOND_AMOUNT_ENABLE, Symbol("checked") -> "checked")
                        } else {
                            @commonToggleButton(setCapabilitiesForm, constants.FormField.COLLECTION_CUSTOM_BOND_AMOUNT_ENABLE)
                        }
                        </div>
                    </div>
                    <div class="capabilityBody" style="display: none;">
                        <div class="propertyAdvancedDetail">
                            <div class="d-flex gap-2 align-content-center mt-2">
                                <div class="bodyHeading">@Messages(constants.View.PROPERTY_ADVANCED_OPTIONS)</div>
                                <i class="bi bi-chevron-down iconDefault iconSmall dropdownIcon" onclick="openPropertyAdvancedOption(this)"></i>
                            </div>
                            <div class="advancedDetailOption">
                                <div class="d-flex justify-content-between align-items-center singleOption requirementOption">
                                    <div class="d-flex gap-2 optionTitle">
                                        <i class="bi bi-asterisk iconDefault iconSmall me-1"></i>
                                        <span>@Messages(constants.View.ADVANCED_PROPERTY_REQUIREMENT)</span>
                                    </div>
                                    <div class="options">
                                    @if(collectionDraft.customBondAmountEnabled && collectionDraft.getCustomBondAmount.get.defaultValue != "") {
                                        @commonToggleButton(setCapabilitiesForm, constants.FormField.COLLECTION_PROPERTY_SET_DEFAULT_VALUE, Symbol("checked") -> "checked")
                                    } else {
                                        @commonToggleButton(setCapabilitiesForm, constants.FormField.COLLECTION_PROPERTY_SET_DEFAULT_VALUE)
                                    }
                                    </div>
                                </div>
                                <div class="mb-3 optionInputField" style="display: none;">
                                @if(collectionDraft.customBondAmountEnabled && collectionDraft.getCustomBondAmount.get.defaultValue != "") {
                                    @commonInputMicroNumber(setCapabilitiesForm, constants.FormField.COLLECTION_CUSTOM_BOND_AMOUNT_DEFAULT, Symbol("required") -> false, Symbol("class") -> "fixedValueField", Symbol("value") -> collectionDraft.getCustomBondAmount.get.defaultValue)
                                } else {
                                    @commonInputMicroNumber(setCapabilitiesForm, constants.FormField.COLLECTION_CUSTOM_BOND_AMOUNT_DEFAULT, Symbol("required") -> false, Symbol("class") -> "fixedValueField")
                                }
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="innerSeparator"></div>
                </div>
            </div>
        </div>
    }
    <script src="@utilities.PublicResource.getVersionedRoute("javascripts/collections/createCollection.js")"></script>
    <script>
        setSetCapabilitiesBackButton('@collectionDraft.id');
</script>