@import controllers.actions.LoginState
@import models.analytics.CollectionAnalysis
@import models.master.Collection
@import views.html.base.buttons._

@(collectionAnalysis: CollectionAnalysis, collection: Collection, earlyAccessCreated: Boolean, launchpadCreated: Boolean)(implicit requestHeader: RequestHeader, messagesProvider: MessagesProvider, optionalLoginState: Option[LoginState])

<div class="sticky-top item-sticky">
    <div class="card rightInfoCard">
        <div class="d-flex flex-column gap-1">
            <div class="analysisTitle">@Messages(constants.View.COLLECTION_TOTAL_NFT_TITLE)</div>
            <div class="analysisValue">@utilities.NumericOperation.formatNumber(collectionAnalysis.totalNFTs)</div>
        </div>
        <div class="d-flex flex-column gap-1 mt-3">
            <div class="analysisTitle">@Messages(constants.View.COLLECTION_TOTAL_NFT_SOLD)</div>
            <div class="analysisValue">@utilities.NumericOperation.formatNumber(collectionAnalysis.totalSold)</div>
        </div>
        <div class="d-flex flex-column gap-1 mt-3">
            <div class="analysisTitle">@Messages(constants.View.COLLECTION_TOTAL_VOLUME_TRADE)</div>
            <div class="analysisValue">@utilities.NumericOperation.formatNumber(collectionAnalysis.totalVolumeTraded)
                $MNTL</div>
        </div>
        <div class="d-flex flex-column gap-1 mt-3">
            <div class="analysisTitle">@Messages(constants.View.COLLECTION_ROYALTY_FEES)</div>
            <div class="analysisValue d-flex align-items-center justify-content-between">@utilities.NumericOperation.formatNumber(collection.royalty * 100) %
                @if(optionalLoginState.isDefined && optionalLoginState.get.username == collection.creatorId) {
                    <span><button onclick="getForm(jsRoutes.controllers.CollectionController.updateRoyaltyForm('@collection.id'))" class="p-0 lh-sm bg-transparent border-0">
                        <i class="bi bi-pencil iconDefault"></i>
                    </button></span>
                }
        </div>
        <div class="separator"></div>
        @if(optionalLoginState.isDefined) {
            @if(optionalLoginState.get.username == collection.creatorId) {
                @if(!earlyAccessCreated && !launchpadCreated) {
                    @commonPrimaryButton(constants.View.CREATE_COLLECTION_SALE, JavaScript(s"saleOptions()"))
                } else {
                    @if(!earlyAccessCreated) {
                        @commonPrimaryButton(constants.Form.CREATE_PUBLIC_LISTING.button, JavaScript(s"getForm(jsRoutes.controllers.PublicListingController.createPublicListingForm('${collection.id}'))"))
                    }
                    @if(!launchpadCreated) {
                        @commonPrimaryButton(constants.Form.CREATE_WHITELIST_SALE.button, JavaScript(s"getForm(jsRoutes.controllers.SaleController.createCollectionSaleForm(undefined, '${collection.id}'))"))
                    }
                }
            } else {
                @if(earlyAccessCreated) {
                    @commonPrimaryButton(constants.View.EARLY_ACCESS, JavaScript(s"viewEarlyAccessCollection('${collection.id}')"))
                }
                @if(earlyAccessCreated && launchpadCreated) {
                    <div class="separator"></div>
                }
                @if(launchpadCreated) {
                    @commonPrimaryButton(constants.View.LAUNCHPAD, JavaScript(s"viewLaunchpadCollection('${collection.id}')"))
                }
            }
        } else {
            @if(earlyAccessCreated) {
                @commonPrimaryButton(constants.View.EARLY_ACCESS, JavaScript(s"viewEarlyAccessCollection('${collection.id}')"))
            }
            @if(earlyAccessCreated && launchpadCreated) {
                <div class="separator"></div>
            }
            @if(launchpadCreated) {
                @commonPrimaryButton(constants.View.LAUNCHPAD, JavaScript(s"viewLaunchpadCollection('${collection.id}')"))
            }
        }

    </div>
</div>
<div class="hidden" id="saleOptionModal">
@views.html.sale.saleOption(s"${collection.id}")
</div>
<script src="@utilities.PublicResource.getVersionedRoute("javascripts/sale/sale.js")"></script>